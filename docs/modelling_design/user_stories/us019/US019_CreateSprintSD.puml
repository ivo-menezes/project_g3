@startuml
!theme plain
hide footbox
autonumber
title "US027 - As Project Manager, I want to create a sprint."

actor ProjectManager as User
participant ": CreateSprintUI" as UI
participant "sprintDTO : SprintDTO" as DTO
participant ": CreateSprintController" as Controller
participant ": SprintService" as Services
participant ": projectCode : ProjectCode" as ProjecCode
participant ": ProjectRepository" as Repository
participant "newSprintDTO : SprintDTO" as newDTO
participant "factorySprint :FactorySprintImpl" as Factory
participant "sprint : Sprint" as Sprint
participant ": SprintRepository" as SprintRepository
participant "sprintData : HashMap" as HashMap
participant "sprint : Sprint" as Sprint

activate User #FFBBBB
User ->  UI: Requests creation of a sprint \n(projectCode, sprintNumber, startDate, endDate)

activate UI #FFBBBB
UI --> DTO **: create(projectCode, \n sprintNumber,\n startDate, endDate)
UI -> Controller: createSprint( sprintDTO)
activate Controller #FFBBBB

Controller -> Services: createSprint(sprintDTO)

activate Services #FFBBBB
Services -> Services : inspectDTO(sprintDTO.projectCode, \n sprintDTO.sprintNumber, sprintDTO.startDate, \n sprintDTO.endDate)
Services -> ProjecCode ** : create(sprintDTO.projectCode)
Services -> Repository: containsID(projectCode)
activate Repository #FFBBBB
Repository -->Services: true
deactivate

Services --> newDTO **: create(projectCode, sprintNumber,\n startDate, endDate)

Services -> Factory:createSprint\n (newSprintDTO)

activate Factory #FFBBBB
Factory -> "sprintID : SprintID" ** : create(newSprintDTO.projectCode, sprintDTO.sprintNumber)
Factory -> "timePeriod : TimePeriod" ** : create (newSprintDTO.startDate, sprintDTO.endDate)
Factory --> Sprint ** :create (sprintID, \n timePeriod)
Factory -> Services : sprint
deactivate

Services -> SprintRepository :save(sprint)
activate SprintRepository #FFBBBB
SprintRepository -> HashMap : containsID(sprintID)
activate HashMap #FFBBBB
HashMap --> SprintRepository : false
SprintRepository -> HashMap : put(sprintID, sprint)
deactivate HashMap #FFBBBB
SprintRepository --> Services: true
deactivate



Services --> Controller: true
deactivate
Controller --> UI: true
deactivate



UI --> User: Confirms created Sprint
deactivate UI
deactivate User #FFBBBB
@enduml