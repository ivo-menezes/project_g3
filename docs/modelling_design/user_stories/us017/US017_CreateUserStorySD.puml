@startuml
!theme plain
hide footbox
autonumber
title "US017 - As Product Owner, I want to create a user story and add it to the Product Backlog"

actor "Product Owner" as user
participant ":CreateUserStoryUI" as UI
participant "userStoryDTO :UserStoryDTO" as dto
participant ":CreateUserStoryController" as Controller
participant ":UserStoryService" as Services
participant ":ProjectRepository" as Repository
participant "factoryUserStory :FactoryUserStoryImpl" as Factory
participant "userStory :UserStory" as UserStory
participant "userStoryRepository :UserStoryRepository" as UsRepository

activate user #FFBBBB
user ->  UI: Selects project and inserts US data\n (projectCode, userStoryId, actor, \ntext, acceptanceCriteria, priority)

activate UI #FFBBBB
UI --> dto ** : create(userStoryId, actor, \ntext, acceptanceCriteria)
UI -> Controller: createUserStory(projectCode, \nuserStoryDTO, priority)

activate Controller #FFBBBB
Controller -> Services: create (projectCode, userStoryDTO, priority)

activate Services #FFBBBB
Services -> Repository: containsID(projectCode)

activate Repository #FFBBBB
Repository -->Services: true
deactivate
Services -> Factory:createUserStory\n (userStoryDTO, priority)

activate Factory #FFBBBB
Factory --> "userStoryID:UserStoryID" ** :create (userStoryDTO.userStoryID)
Factory --> "userStoryActor:UserStoryActor" ** :create (userStoryDTO.actor)
Factory --> "userStoryPriority:UserStoryPriority"** :create (userStoryDTO.priority)
Factory --> "userStoryStatus:UserStoryStatus" ** :create ()
Factory --> "userStoryAcceptanceCriteria:UserStoryAcceptanceCriteria" ** :create (userStoryDTO.acceptanceCriteria)
Factory --> "description:Description" ** :create (userStoryDTO.description)
Factory --> UserStory ** :create (userStoryID,\n userStoryActor,\n userStoryPriority,\n userStoryStatus,\n userStoryAcceptanceCriteria,\n description )
Factory --> Services :userStory
Services -> UsRepository :save(userStory)
deactivate

activate UsRepository #FFBBBB
UsRepository ->UsRepository :containsID
UsRepository ->UsRepository :put(userStoryID, userStory)
UsRepository --> Services: true
deactivate
Services --> Controller: true
deactivate
Controller --> UI: true
deactivate
UI --> user: Confirms US creation and addition to Product Backlog.

@enduml