@startuml
!theme plain
hide footbox

actor Administrator  as Administrator
participant ": RegisterAccountUI" as UI
participant ": RegisterAccountController" as Controller
participant ": ProfileList" as ProfileList
participant " defaultProfile : Profile"
participant ": AccountList" as AccountList
participant "registerAccountDTO : RegisterAccountDTO" as DTO
participant " newAccount : Account" as newAccount


activate Administrator #FFBBBB
Administrator ->  UI : Register user (name, email, phone, photo)

activate UI #FFBBBB
UI -> Controller : registerAccount(registerAccountDTO)

activate Controller #FFBBBB
Controller -> ProfileList : defaultProfile = getProfileByName("User")

activate ProfileList #FFBBBB
deactivate ProfileList

Controller -> AccountList : registerAccount(registerAccountDTO, defaultProfile)

activate AccountList #FFBBBB
AccountList -> DTO : email = getEmail()

activate DTO #FFBBBB
deactivate DTO

AccountList -> AccountList : isEmailInUse(email)

AccountList --> newAccount ** : newAccount = create(registerAccountDTO, defaultProfile)
AccountList -> AccountList : save(newAccount)

AccountList --> Controller : Confirms new account registration
deactivate AccountList

Controller --> UI : Confirms new account registration
deactivate Controller
UI --> Administrator : Confirms new account registration
deactivate UI
@enduml